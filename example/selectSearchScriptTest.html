
<html>
    <head>
        <title>selectSearchScript test page</title>
        <script type="text/javascript" src="selectSearchScript.js"></script>
    </head>

    <body>
        <h1 id="displayQueryStringHere"></h1>
        <div id="selectableContent" >
            h
        </div>
        <script>
            var queryStringDisplayElement = document.getElementById("displayQueryStringHere");
            const params = new URLSearchParams(window.location.search)
            var searchValue = params.get("search");
            if(searchValue != null && searchValue != undefined) {
                queryStringDisplayElement.innerHTML = searchValue;
            }

            //okay let's construct this search ui component
            var searchContainer = document.createElement("div");
            searchContainer.style.display = "flex";
            searchContainer.style.flexDirection = "row";
            searchContainer.style.position = "fixed";
            searchContainer.style.top = 0;
            searchContainer.style.right = 0;

            var resultsContainer = document.createElement("div");
            searchContainer.appendChild(resultsContainer);

            var searchInput = document.createElement("input");
            searchInput.type = "text";
            searchInput.placeholder = "regex here";

            searchContainer.appendChild(searchInput);

            document.body.appendChild(searchContainer)


            const input = document.querySelector('input');

            input.addEventListener('input', updateValue);

            function updateValue(e) {
    //            log.textContent = e.target.value;
                var pageText = document.documentElement.innerHTML;
                var rep_term = "test";
 
                var rep_regex = new RegExp(e.target.value, "gi");
                
                document.documentElement.innerHTML = document.documentElement.innerHTML.replace(rep_regex,"<span>TEST</span>");
                console.log(e.target.value);
            }
        </script>
    </body>
</html>
